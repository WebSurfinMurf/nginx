<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code Agent Workflow - Comprehensive Guide</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-brand">Agent Workflow Guide</div>
        <div class="nav-links">
            <a href="#level1">Overview</a>
            <a href="#level2">Coordination</a>
            <a href="#level3">Agents</a>
            <a href="#level4">Infrastructure</a>
            <a href="#level5">Implementation</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
        <div class="hero-content">
            <h1>Claude Code Agent Workflow</h1>
            <p class="hero-subtitle">A Multi-Agent System for Infrastructure Orchestration</p>
            <p class="hero-version">Version 2.0 - January 2026</p>
            <div class="hero-badges">
                <span class="badge">5 Specialized Agents</span>
                <span class="badge">AI Review Board Peer Review</span>
                <span class="badge">15+ Infrastructure Skills</span>
                <span class="badge">Automated Quality Gates</span>
            </div>
        </div>
    </header>

    <!-- Level 1: Executive Overview -->
    <section id="level1" class="level level-1">
        <div class="level-header">
            <span class="level-number">1</span>
            <h2>Executive Overview</h2>
            <p class="level-description">30-second understanding of the system</p>
        </div>

        <div class="content-card">
            <h3>What Is This System?</h3>
            <p>A coordinated team of AI agents that work together to design, implement, test, and deploy infrastructure services. Each agent specializes in a specific domain, ensuring expert-level execution at every stage.</p>
        </div>

        <div class="diagram-container">
            <h3>The Agent Team</h3>
            <svg class="workflow-diagram" viewBox="0 0 800 300">
                <!-- PM Agent (Center Top) -->
                <g class="agent-node pm">
                    <circle cx="400" cy="60" r="45" fill="#6366f1"/>
                    <text x="400" y="55" text-anchor="middle" fill="white" font-weight="bold" font-size="14">PM</text>
                    <text x="400" y="72" text-anchor="middle" fill="white" font-size="10">Orchestrator</text>
                </g>

                <!-- Connecting Lines -->
                <line x1="355" y1="85" x2="180" y2="160" stroke="#94a3b8" stroke-width="2"/>
                <line x1="375" y1="100" x2="300" y2="160" stroke="#94a3b8" stroke-width="2"/>
                <line x1="425" y1="100" x2="500" y2="160" stroke="#94a3b8" stroke-width="2"/>
                <line x1="445" y1="85" x2="620" y2="160" stroke="#94a3b8" stroke-width="2"/>

                <!-- Architect Agent -->
                <g class="agent-node architect">
                    <circle cx="150" cy="200" r="40" fill="#8b5cf6"/>
                    <text x="150" y="195" text-anchor="middle" fill="white" font-weight="bold" font-size="12">Architect</text>
                    <text x="150" y="210" text-anchor="middle" fill="white" font-size="9">Design</text>
                </g>

                <!-- Security Agent -->
                <g class="agent-node security">
                    <circle cx="300" cy="200" r="40" fill="#ef4444"/>
                    <text x="300" y="195" text-anchor="middle" fill="white" font-weight="bold" font-size="12">Security</text>
                    <text x="300" y="210" text-anchor="middle" fill="white" font-size="9">Network/Auth</text>
                </g>

                <!-- Developer Agent -->
                <g class="agent-node developer">
                    <circle cx="500" cy="200" r="40" fill="#10b981"/>
                    <text x="500" y="195" text-anchor="middle" fill="white" font-weight="bold" font-size="12">Developer</text>
                    <text x="500" y="210" text-anchor="middle" fill="white" font-size="9">Implement</text>
                </g>

                <!-- QA Agent -->
                <g class="agent-node qa">
                    <circle cx="650" cy="200" r="40" fill="#f59e0b"/>
                    <text x="650" y="195" text-anchor="middle" fill="white" font-weight="bold" font-size="12">QA</text>
                    <text x="650" y="210" text-anchor="middle" fill="white" font-size="9">Test/Validate</text>
                </g>

                <!-- Flow Arrow at Bottom -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
                    </marker>
                </defs>
                <line x1="190" y1="260" x2="610" y2="260" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)"/>
                <text x="400" y="280" text-anchor="middle" fill="#64748b" font-size="12">Workflow Direction</text>
            </svg>
        </div>

        <div class="cards-grid">
            <div class="role-card pm-card">
                <div class="role-icon">PM</div>
                <h4>Project Manager</h4>
                <p>Plans projects, coordinates agents, synthesizes results</p>
            </div>
            <div class="role-card architect-card">
                <div class="role-icon">AR</div>
                <h4>Architect</h4>
                <p>Designs systems, evaluates technology, creates specifications</p>
            </div>
            <div class="role-card security-card">
                <div class="role-icon">SE</div>
                <h4>Security</h4>
                <p>Configures networks, authentication, Traefik routing</p>
            </div>
            <div class="role-card developer-card">
                <div class="role-icon">DE</div>
                <h4>Developer</h4>
                <p>Implements code, deploys services, debugs issues</p>
            </div>
            <div class="role-card qa-card">
                <div class="role-icon">QA</div>
                <h4>Quality Assurance</h4>
                <p>Creates tests, validates implementations, quality gates</p>
            </div>
        </div>
    </section>

    <!-- Level 2: Agent Coordination -->
    <section id="level2" class="level level-2">
        <div class="level-header">
            <span class="level-number">2</span>
            <h2>Agent Coordination</h2>
            <p class="level-description">How agents work together with AI Review Board peer review</p>
        </div>

        <div class="diagram-container">
            <h3>Complete Workflow with AI Review Board</h3>
            <svg class="workflow-diagram-large" viewBox="0 0 900 500">
                <!-- Phase Labels -->
                <text x="100" y="30" font-size="14" font-weight="bold" fill="#1e293b">Planning</text>
                <text x="350" y="30" font-size="14" font-weight="bold" fill="#1e293b">Design</text>
                <text x="550" y="30" font-size="14" font-weight="bold" fill="#1e293b">Implementation</text>
                <text x="780" y="30" font-size="14" font-weight="bold" fill="#1e293b">Validation</text>

                <!-- Phase Dividers -->
                <line x1="250" y1="40" x2="250" y2="480" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="5,5"/>
                <line x1="480" y1="40" x2="480" y2="480" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="5,5"/>
                <line x1="710" y1="40" x2="710" y2="480" stroke="#e2e8f0" stroke-width="1" stroke-dasharray="5,5"/>

                <!-- Step 1: User Request -->
                <rect x="50" y="60" width="150" height="50" rx="8" fill="#f1f5f9" stroke="#94a3b8"/>
                <text x="125" y="90" text-anchor="middle" font-size="12" fill="#1e293b">User Request</text>

                <!-- Arrow -->
                <line x1="125" y1="110" x2="125" y2="140" stroke="#6366f1" stroke-width="2" marker-end="url(#arrowhead-purple)"/>

                <!-- Step 2: PM Creates Plan -->
                <rect x="50" y="140" width="150" height="50" rx="8" fill="#6366f1"/>
                <text x="125" y="165" text-anchor="middle" font-size="11" fill="white" font-weight="bold">PM Creates Plan</text>
                <text x="125" y="180" text-anchor="middle" font-size="9" fill="white">(EnterPlanMode)</text>

                <!-- Arrow to Swarm -->
                <line x1="125" y1="190" x2="125" y2="220" stroke="#6366f1" stroke-width="2"/>
                <path d="M125,220 L125,250 L50,280" stroke="#06b6d4" stroke-width="2" fill="none" marker-end="url(#arrowhead-cyan)"/>

                <!-- AI Review Board Review 1 -->
                <rect x="10" y="280" width="130" height="60" rx="8" fill="#06b6d4"/>
                <text x="75" y="305" text-anchor="middle" font-size="10" fill="white" font-weight="bold">AI Review Board Review</text>
                <text x="75" y="320" text-anchor="middle" font-size="8" fill="white">Gemini + Codex + Claude</text>
                <text x="75" y="332" text-anchor="middle" font-size="8" fill="white">(Major Plans Only)</text>

                <!-- Feedback Loop -->
                <path d="M140,310 L180,310 L180,165 L200,165" stroke="#06b6d4" stroke-width="2" fill="none" stroke-dasharray="4,2"/>
                <text x="185" y="240" font-size="8" fill="#06b6d4" transform="rotate(-90, 185, 240)">Feedback</text>

                <!-- Arrow to User Approval -->
                <line x1="125" y1="340" x2="125" y2="370" stroke="#6366f1" stroke-width="2"/>

                <!-- Step 3: User Approves -->
                <rect x="50" y="370" width="150" height="50" rx="8" fill="#22c55e"/>
                <text x="125" y="395" text-anchor="middle" font-size="11" fill="white" font-weight="bold">User Approves</text>
                <text x="125" y="410" text-anchor="middle" font-size="9" fill="white">(ExitPlanMode)</text>

                <!-- Arrow to Architect -->
                <path d="M200,395 L280,395 L280,100 L365,100" stroke="#8b5cf6" stroke-width="2" fill="none" marker-end="url(#arrowhead-violet)"/>

                <!-- Step 4: Architect Designs -->
                <rect x="290" y="70" width="150" height="50" rx="8" fill="#8b5cf6"/>
                <text x="365" y="95" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Architect Designs</text>
                <text x="365" y="108" text-anchor="middle" font-size="9" fill="white">(ADR Created)</text>

                <!-- Arrow to Swarm 2 -->
                <line x1="365" y1="120" x2="365" y2="160" stroke="#8b5cf6" stroke-width="2"/>

                <!-- AI Review Board Review 2 -->
                <rect x="290" y="160" width="150" height="50" rx="8" fill="#06b6d4"/>
                <text x="365" y="185" text-anchor="middle" font-size="10" fill="white" font-weight="bold">Swarm Reviews Design</text>
                <text x="365" y="198" text-anchor="middle" font-size="8" fill="white">(Major Designs Only)</text>

                <!-- Architect Iterates -->
                <path d="M290,185 L260,185 L260,95 L290,95" stroke="#06b6d4" stroke-width="2" fill="none" stroke-dasharray="4,2" marker-end="url(#arrowhead-cyan)"/>
                <text x="250" y="140" font-size="8" fill="#06b6d4" transform="rotate(-90, 250, 140)">Iterate</text>

                <!-- Arrow to Security -->
                <line x1="365" y1="210" x2="365" y2="280" stroke="#ef4444" stroke-width="2" marker-end="url(#arrowhead-red)"/>

                <!-- Step 5: Security Configures -->
                <rect x="290" y="280" width="150" height="50" rx="8" fill="#ef4444"/>
                <text x="365" y="305" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Security Configures</text>
                <text x="365" y="318" text-anchor="middle" font-size="9" fill="white">(Network, Auth)</text>

                <!-- Arrow to Developer -->
                <path d="M440,305 L500,305 L500,100 L560,100" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrowhead-green)"/>

                <!-- Step 6: Developer Implements -->
                <rect x="500" y="70" width="150" height="50" rx="8" fill="#10b981"/>
                <text x="575" y="95" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Developer Implements</text>
                <text x="575" y="108" text-anchor="middle" font-size="9" fill="white">(Code + Deploy)</text>

                <!-- Arrow to Spec -->
                <line x1="575" y1="120" x2="575" y2="160" stroke="#10b981" stroke-width="2"/>

                <!-- Step 7: Developer Creates Spec -->
                <rect x="500" y="160" width="150" height="50" rx="8" fill="#059669"/>
                <text x="575" y="185" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Creates Spec for QA</text>
                <text x="575" y="198" text-anchor="middle" font-size="8" fill="white">(API, Functions, Examples)</text>

                <!-- Arrow to QA -->
                <path d="M650,185 L720,185 L720,100 L780,100" stroke="#f59e0b" stroke-width="2" fill="none" marker-end="url(#arrowhead-amber)"/>

                <!-- Step 8: QA Creates Tests -->
                <rect x="720" y="70" width="150" height="50" rx="8" fill="#f59e0b"/>
                <text x="795" y="95" text-anchor="middle" font-size="11" fill="white" font-weight="bold">QA Creates Tests</text>
                <text x="795" y="108" text-anchor="middle" font-size="9" fill="white">(From Dev Spec)</text>

                <!-- Arrow to Run Tests -->
                <line x1="795" y1="120" x2="795" y2="160" stroke="#f59e0b" stroke-width="2"/>

                <!-- Step 9: QA Runs Tests -->
                <rect x="720" y="160" width="150" height="50" rx="8" fill="#d97706"/>
                <text x="795" y="185" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Runs Tests</text>
                <text x="795" y="198" text-anchor="middle" font-size="9" fill="white">(pytest, jest, etc.)</text>

                <!-- Feedback loop to Developer -->
                <path d="M720,185 L690,185 L690,280 L650,280 L650,185" stroke="#ef4444" stroke-width="2" fill="none" stroke-dasharray="4,2"/>
                <text x="670" y="230" font-size="8" fill="#ef4444">Fix Failures</text>

                <!-- Arrow to Report -->
                <line x1="795" y1="210" x2="795" y2="260" stroke="#f59e0b" stroke-width="2"/>

                <!-- Step 10: QA Reports -->
                <rect x="720" y="260" width="150" height="50" rx="8" fill="#22c55e"/>
                <text x="795" y="285" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Quality Gate Pass</text>
                <text x="795" y="298" text-anchor="middle" font-size="9" fill="white">(All Tests Pass)</text>

                <!-- Arrow to PM Report -->
                <path d="M795,310 L795,400 L200,400" stroke="#6366f1" stroke-width="2" fill="none" marker-end="url(#arrowhead-purple)"/>

                <!-- PM Synthesis -->
                <rect x="50" y="440" width="150" height="40" rx="8" fill="#6366f1"/>
                <text x="125" y="465" text-anchor="middle" font-size="11" fill="white" font-weight="bold">PM Synthesizes Report</text>

                <!-- Arrow Markers -->
                <defs>
                    <marker id="arrowhead-purple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#6366f1"/>
                    </marker>
                    <marker id="arrowhead-violet" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
                    </marker>
                    <marker id="arrowhead-cyan" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#06b6d4"/>
                    </marker>
                    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444"/>
                    </marker>
                    <marker id="arrowhead-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
                    </marker>
                    <marker id="arrowhead-amber" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                        <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
                    </marker>
                </defs>
            </svg>
        </div>

        <div class="content-card highlight-card">
            <h3>AI Review Board Peer Review</h3>
            <p>For <strong>major milestones only</strong>, the PM dispatches plans and designs to three AI CLIs running in Docker containers. Each CLI has <strong>full read-only access</strong> to all projects and returns structured <strong>JSON responses</strong>.</p>

            <div class="swarm-architecture-note">
                <span class="arch-label">Native CLI Integration</span>
                <span class="arch-detail">Not API calls — full CLI agents with filesystem access</span>
            </div>

            <div class="swarm-grid">
                <div class="swarm-node">
                    <div class="swarm-icon gemini">G</div>
                    <h4>Gemini CLI</h4>
                    <p>Google's CLI with web search + project read access</p>
                    <code class="cli-tag">gemini</code>
                </div>
                <div class="swarm-node">
                    <div class="swarm-icon codex">C</div>
                    <h4>Codex CLI</h4>
                    <p>OpenAI's CLI with code analysis + project read access</p>
                    <code class="cli-tag">codex</code>
                </div>
                <div class="swarm-node">
                    <div class="swarm-icon claude">A</div>
                    <h4>Claude CLI</h4>
                    <p>Anthropic's CLI with reasoning + project read access</p>
                    <code class="cli-tag">claude</code>
                </div>
            </div>

            <div class="json-interface-note">
                <strong>JSON Interface:</strong> All swarm nodes return structured JSON with <code>assessment</code>, <code>concerns</code>, <code>suggestions</code>, and <code>approval</code> fields for consistent parsing.
            </div>

            <div class="callout">
                <strong>When to use swarm:</strong> Initial project plans, initial architecture designs, user-requested reviews.
                <br><strong>When NOT to use:</strong> Minor changes, bug fixes, routine deployments.
            </div>
        </div>

        <div class="cards-grid two-column">
            <div class="content-card">
                <h3>Major Project Workflow</h3>
                <ol class="workflow-list">
                    <li><span class="step-badge pm-badge">PM</span> Creates structured plan</li>
                    <li><span class="step-badge swarm-badge">Swarm</span> Reviews plan</li>
                    <li><span class="step-badge user-badge">User</span> Approves plan</li>
                    <li><span class="step-badge architect-badge">Architect</span> Designs solution</li>
                    <li><span class="step-badge swarm-badge">Swarm</span> Reviews design</li>
                    <li><span class="step-badge security-badge">Security</span> Configures network/auth</li>
                    <li><span class="step-badge developer-badge">Developer</span> Implements + creates spec</li>
                    <li><span class="step-badge qa-badge">QA</span> Creates tests, validates</li>
                    <li><span class="step-badge pm-badge">PM</span> Synthesizes final report</li>
                </ol>
            </div>
            <div class="content-card">
                <h3>Minor Change Workflow</h3>
                <ol class="workflow-list">
                    <li><span class="step-badge pm-badge">PM</span> Assigns task directly</li>
                    <li class="skipped"><span class="step-badge disabled-badge">Swarm</span> <em>Skipped</em></li>
                    <li class="skipped"><span class="step-badge disabled-badge">User</span> <em>No approval needed</em></li>
                    <li><span class="step-badge developer-badge">Developer</span> Implements + creates spec</li>
                    <li><span class="step-badge qa-badge">QA</span> Validates</li>
                    <li><span class="step-badge pm-badge">PM</span> Reports completion</li>
                </ol>
            </div>
        </div>
    </section>

    <!-- Level 3: Agent Details -->
    <section id="level3" class="level level-3">
        <div class="level-header">
            <span class="level-number">3</span>
            <h2>Agent Details</h2>
            <p class="level-description">Deep dive into each agent's responsibilities and capabilities</p>
        </div>

        <!-- PM Agent -->
        <div class="agent-detail pm-detail">
            <div class="agent-header">
                <div class="agent-avatar pm-avatar">PM</div>
                <div class="agent-info">
                    <h3>Project Manager Agent</h3>
                    <p class="agent-location">~/.claude/agents/pm.md</p>
                </div>
            </div>
            <div class="agent-content">
                <div class="agent-capabilities">
                    <h4>Capabilities</h4>
                    <ul>
                        <li>Creates structured plans using EnterPlanMode</li>
                        <li>Coordinates AI Review Board peer review for major milestones</li>
                        <li>Orchestrates sequential and parallel agent execution</li>
                        <li>Synthesizes multi-agent work into coherent reports</li>
                        <li>Tracks progress and identifies blockers</li>
                    </ul>
                </div>
                <div class="agent-tools">
                    <h4>Tools</h4>
                    <div class="tool-badges">
                        <span class="tool-badge">Read</span>
                        <span class="tool-badge">Write</span>
                        <span class="tool-badge">Grep</span>
                        <span class="tool-badge">Glob</span>
                        <span class="tool-badge">Bash</span>
                    </div>
                </div>
                <div class="agent-files">
                    <h4>Workspace Files</h4>
                    <code>$HOME/projects/data/claudeagents/pm/</code>
                    <ul class="file-list">
                        <li><code>plans/{project}/plan.md</code> - Project plans</li>
                        <li><code>reviews/{project}/</code> - Swarm review syntheses</li>
                        <li><code>tasks/{project}/</code> - Task breakdowns</li>
                        <li><code>reports/{project}/</code> - Final reports</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Architect Agent -->
        <div class="agent-detail architect-detail">
            <div class="agent-header">
                <div class="agent-avatar architect-avatar">AR</div>
                <div class="agent-info">
                    <h3>Architect Agent</h3>
                    <p class="agent-location">~/projects/.claude/agents/architect.md</p>
                </div>
            </div>
            <div class="agent-content">
                <div class="agent-capabilities">
                    <h4>Capabilities</h4>
                    <ul>
                        <li>Designs system architecture and technology stack</li>
                        <li>Creates Architecture Decision Records (ADRs)</li>
                        <li>Evaluates technology trade-offs</li>
                        <li>Iterates designs based on swarm feedback</li>
                        <li>Enforces centralized infrastructure principle</li>
                    </ul>
                </div>
                <div class="agent-tools">
                    <h4>Tools</h4>
                    <div class="tool-badges">
                        <span class="tool-badge">Read</span>
                        <span class="tool-badge">Write</span>
                        <span class="tool-badge">Grep</span>
                        <span class="tool-badge">Glob</span>
                        <span class="tool-badge">Bash</span>
                    </div>
                </div>
                <div class="agent-files">
                    <h4>Workspace Files</h4>
                    <code>$HOME/projects/data/claudeagents/architect/</code>
                    <ul class="file-list">
                        <li><code>decisions/{project}/architecture.md</code> - ADRs</li>
                        <li><code>decisions/{project}/design.md</code> - Specifications</li>
                        <li><code>notes/{project}/research-*.md</code> - Evaluations</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Security Agent -->
        <div class="agent-detail security-detail">
            <div class="agent-header">
                <div class="agent-avatar security-avatar">SE</div>
                <div class="agent-info">
                    <h3>Security Agent</h3>
                    <p class="agent-location">~/projects/.claude/agents/security.md</p>
                </div>
            </div>
            <div class="agent-content">
                <div class="agent-capabilities">
                    <h4>Capabilities</h4>
                    <ul>
                        <li>Configures Docker network topology</li>
                        <li>Sets up Traefik routing and SSL/TLS</li>
                        <li>Manages Keycloak OAuth2/OIDC clients</li>
                        <li>Implements firewall rules</li>
                        <li>Performs security audits</li>
                    </ul>
                </div>
                <div class="agent-tools">
                    <h4>Tools</h4>
                    <div class="tool-badges">
                        <span class="tool-badge">Read</span>
                        <span class="tool-badge">Write</span>
                        <span class="tool-badge">Grep</span>
                        <span class="tool-badge">Glob</span>
                        <span class="tool-badge">Bash</span>
                    </div>
                </div>
                <div class="agent-files">
                    <h4>Workspace Files</h4>
                    <code>$HOME/projects/data/claudeagents/security/</code>
                    <ul class="file-list">
                        <li><code>decisions/{project}/network.md</code> - Network topology</li>
                        <li><code>decisions/{project}/traefik.md</code> - Routing rules</li>
                        <li><code>decisions/{project}/keycloak.md</code> - Auth setup</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Developer Agent -->
        <div class="agent-detail developer-detail">
            <div class="agent-header">
                <div class="agent-avatar developer-avatar">DE</div>
                <div class="agent-info">
                    <h3>Developer Agent</h3>
                    <p class="agent-location">~/projects/.claude/agents/developer.md</p>
                </div>
            </div>
            <div class="agent-content">
                <div class="agent-capabilities">
                    <h4>Capabilities</h4>
                    <ul>
                        <li>Implements code following design specs</li>
                        <li>Creates Docker containers and compose files</li>
                        <li>Deploys and manages services</li>
                        <li>Creates specifications for QA testing</li>
                        <li>Debugs and troubleshoots issues</li>
                    </ul>
                </div>
                <div class="agent-tools">
                    <h4>Tools</h4>
                    <div class="tool-badges">
                        <span class="tool-badge">Read</span>
                        <span class="tool-badge">Write</span>
                        <span class="tool-badge">Edit</span>
                        <span class="tool-badge">Grep</span>
                        <span class="tool-badge">Glob</span>
                        <span class="tool-badge">Bash</span>
                    </div>
                </div>
                <div class="agent-files">
                    <h4>Workspace Files</h4>
                    <code>$HOME/projects/data/claudeagents/developer/</code>
                    <ul class="file-list">
                        <li><code>specs/{project}/spec.md</code> - Specs for QA</li>
                        <li><code>notes/{project}/deployment.md</code> - Deployment logs</li>
                        <li><code>notes/{project}/debug-*.md</code> - Debug notes</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- QA Agent -->
        <div class="agent-detail qa-detail">
            <div class="agent-header">
                <div class="agent-avatar qa-avatar">QA</div>
                <div class="agent-info">
                    <h3>QA Agent</h3>
                    <p class="agent-location">~/projects/.claude/agents/qa.md</p>
                </div>
            </div>
            <div class="agent-content">
                <div class="agent-capabilities">
                    <h4>Capabilities</h4>
                    <ul>
                        <li>Creates test suites from developer specifications</li>
                        <li>Writes actual test code (pytest, jest)</li>
                        <li><strong>Commits tests to GitLab</strong>, triggers CI pipeline</li>
                        <li><strong>Monitors pipeline</strong> via GitLab API</li>
                        <li>Enforces quality gates from CI results</li>
                    </ul>
                </div>
                <div class="agent-integration">
                    <h4>GitLab Integration</h4>
                    <div class="gitlab-flow">
                        <span class="flow-step">Create tests</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-step">Push to GitLab</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-step">CI runs tests</span>
                        <span class="flow-arrow">→</span>
                        <span class="flow-step">Read results</span>
                    </div>
                    <p class="integration-note">Tests execute in GitLab CI runners (not locally)</p>
                </div>
                <div class="agent-tools">
                    <h4>Tools</h4>
                    <div class="tool-badges">
                        <span class="tool-badge">Read</span>
                        <span class="tool-badge">Write</span>
                        <span class="tool-badge">Edit</span>
                        <span class="tool-badge">Grep</span>
                        <span class="tool-badge">Glob</span>
                        <span class="tool-badge">Bash</span>
                        <span class="tool-badge gitlab-badge">GitLab API</span>
                    </div>
                </div>
                <div class="agent-files">
                    <h4>Workspace Files</h4>
                    <code>$HOME/projects/data/claudeagents/qa/</code>
                    <ul class="file-list">
                        <li><code>workspace/{project}/</code> - Git clones</li>
                        <li><code>tests/{project}/</code> - Test files before commit</li>
                        <li><code>results/{project}/results.md</code> - Pipeline results</li>
                        <li><code>reports/{project}/quality-report.md</code> - Quality assessment</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- File-Based Communication -->
        <div class="content-card">
            <h3>File-Based Communication</h3>
            <p>All agents communicate through a shared file system. This enables asynchronous collaboration, persistent context, and a clear audit trail.</p>
            <div class="file-structure">
                <pre>
$HOME/projects/data/claudeagents/
├── pm/
│   ├── plans/              # Project plans
│   ├── reviews/            # AI Review Board review syntheses
│   ├── tasks/              # Task breakdowns
│   └── reports/            # Final reports
├── architect/
│   ├── decisions/          # Architecture Decision Records
│   └── notes/              # Research and evaluations
├── security/
│   └── decisions/          # Network, Traefik, Keycloak configs
├── developer/
│   ├── specs/              # Specifications for QA
│   └── notes/              # Deployment logs, debug notes
└── qa/
    ├── tests/              # Actual test files
    ├── results/            # Test execution results
    └── reports/            # Quality reports
                </pre>
            </div>
        </div>
    </section>

    <!-- Level 4: Infrastructure Layer -->
    <section id="level4" class="level level-4">
        <div class="level-header">
            <span class="level-number">4</span>
            <h2>Infrastructure Layer</h2>
            <p class="level-description">Skills, Hooks, and MCP Tools that power the agents</p>
        </div>

        <!-- Skills Section -->
        <div class="subsection">
            <h3 class="subsection-title">
                <span class="subsection-icon">S</span>
                Skills System
            </h3>
            <p class="subsection-description">Reusable expertise modules that agents invoke for specialized procedures</p>

            <div class="diagram-container">
                <svg class="skills-diagram" viewBox="0 0 800 350">
                    <!-- Agent boxes at top -->
                    <rect x="100" y="20" width="120" height="40" rx="6" fill="#8b5cf6"/>
                    <text x="160" y="45" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Architect</text>

                    <rect x="340" y="20" width="120" height="40" rx="6" fill="#10b981"/>
                    <text x="400" y="45" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Developer</text>

                    <rect x="580" y="20" width="120" height="40" rx="6" fill="#ef4444"/>
                    <text x="640" y="45" text-anchor="middle" fill="white" font-size="12" font-weight="bold">Security</text>

                    <!-- Lines to skills -->
                    <line x1="160" y1="60" x2="160" y2="100" stroke="#8b5cf6" stroke-width="2"/>
                    <line x1="400" y1="60" x2="400" y2="100" stroke="#10b981" stroke-width="2"/>
                    <line x1="640" y1="60" x2="640" y2="100" stroke="#ef4444" stroke-width="2"/>

                    <!-- Skills Layer -->
                    <rect x="20" y="100" width="760" height="230" rx="8" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2"/>
                    <text x="400" y="125" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e293b">Skills Library (15+ Skills)</text>

                    <!-- Architect Skills -->
                    <rect x="60" y="145" width="180" height="35" rx="4" fill="#c4b5fd"/>
                    <text x="150" y="167" text-anchor="middle" font-size="10" fill="#1e293b">architecture-diagram-creator</text>

                    <!-- Developer Skills -->
                    <rect x="260" y="145" width="120" height="35" rx="4" fill="#6ee7b7"/>
                    <text x="320" y="167" text-anchor="middle" font-size="10" fill="#1e293b">service-deployment</text>

                    <rect x="390" y="145" width="120" height="35" rx="4" fill="#6ee7b7"/>
                    <text x="450" y="167" text-anchor="middle" font-size="10" fill="#1e293b">postgres-integration</text>

                    <rect x="260" y="190" width="120" height="35" rx="4" fill="#6ee7b7"/>
                    <text x="320" y="212" text-anchor="middle" font-size="10" fill="#1e293b">keycloak-setup</text>

                    <rect x="390" y="190" width="120" height="35" rx="4" fill="#6ee7b7"/>
                    <text x="450" y="212" text-anchor="middle" font-size="10" fill="#1e293b">traefik-setup</text>

                    <rect x="260" y="235" width="120" height="35" rx="4" fill="#6ee7b7"/>
                    <text x="320" y="257" text-anchor="middle" font-size="10" fill="#1e293b">logging-observability</text>

                    <rect x="390" y="235" width="120" height="35" rx="4" fill="#6ee7b7"/>
                    <text x="450" y="257" text-anchor="middle" font-size="10" fill="#1e293b">troubleshooting</text>

                    <rect x="260" y="280" width="120" height="35" rx="4" fill="#6ee7b7"/>
                    <text x="320" y="302" text-anchor="middle" font-size="10" fill="#1e293b">naming-validator</text>

                    <rect x="390" y="280" width="120" height="35" rx="4" fill="#6ee7b7"/>
                    <text x="450" y="302" text-anchor="middle" font-size="10" fill="#1e293b">nginx-static-site</text>

                    <!-- Security Skills -->
                    <rect x="540" y="145" width="120" height="35" rx="4" fill="#fca5a5"/>
                    <text x="600" y="167" text-anchor="middle" font-size="10" fill="#1e293b">secrets-security</text>

                    <rect x="540" y="190" width="120" height="35" rx="4" fill="#fca5a5"/>
                    <text x="600" y="212" text-anchor="middle" font-size="10" fill="#1e293b">network-config</text>

                    <!-- General Skills -->
                    <rect x="60" y="235" width="140" height="35" rx="4" fill="#94a3b8"/>
                    <text x="130" y="257" text-anchor="middle" font-size="10" fill="white">ai-communication</text>

                    <rect x="60" y="280" width="140" height="35" rx="4" fill="#94a3b8"/>
                    <text x="130" y="302" text-anchor="middle" font-size="10" fill="white">gitlab-integration</text>

                    <!-- PM Skill -->
                    <rect x="670" y="280" width="100" height="35" rx="4" fill="#a5b4fc"/>
                    <text x="720" y="302" text-anchor="middle" font-size="10" fill="#1e293b">skill-creator</text>
                </svg>
            </div>

            <div class="cards-grid three-column">
                <div class="skill-card architect-skill">
                    <h4>Architect Skills</h4>
                    <ul>
                        <li>architecture-diagram-creator</li>
                    </ul>
                </div>
                <div class="skill-card developer-skill">
                    <h4>Developer Skills</h4>
                    <ul>
                        <li>service-deployment</li>
                        <li>postgres-integration</li>
                        <li>keycloak-setup</li>
                        <li>traefik-setup</li>
                        <li>logging-observability</li>
                        <li>troubleshooting</li>
                        <li>naming-validator</li>
                        <li>nginx-static-site</li>
                    </ul>
                </div>
                <div class="skill-card security-skill">
                    <h4>Security Skills</h4>
                    <ul>
                        <li>secrets-security</li>
                        <li>network-config</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Hooks Section -->
        <div class="subsection">
            <h3 class="subsection-title">
                <span class="subsection-icon">H</span>
                Hooks System
            </h3>
            <p class="subsection-description">Lifecycle event handlers that run automatically at key moments</p>

            <div class="diagram-container">
                <svg class="hooks-diagram" viewBox="0 0 800 200">
                    <!-- Timeline -->
                    <line x1="50" y1="100" x2="750" y2="100" stroke="#94a3b8" stroke-width="3"/>

                    <!-- Hook Points -->
                    <g class="hook-point">
                        <circle cx="100" cy="100" r="25" fill="#6366f1"/>
                        <text x="100" y="105" text-anchor="middle" fill="white" font-size="10" font-weight="bold">START</text>
                        <text x="100" y="150" text-anchor="middle" font-size="9" fill="#64748b">session-start.sh</text>
                        <text x="100" y="165" text-anchor="middle" font-size="8" fill="#94a3b8">Load context</text>
                    </g>

                    <g class="hook-point">
                        <circle cx="250" cy="100" r="25" fill="#f59e0b"/>
                        <text x="250" y="105" text-anchor="middle" fill="white" font-size="10" font-weight="bold">USER</text>
                        <text x="250" y="150" text-anchor="middle" font-size="9" fill="#64748b">user-prompt-submit.sh</text>
                        <text x="250" y="165" text-anchor="middle" font-size="8" fill="#94a3b8">Log prompts</text>
                    </g>

                    <g class="hook-point">
                        <circle cx="400" cy="100" r="25" fill="#ef4444"/>
                        <text x="400" y="105" text-anchor="middle" fill="white" font-size="10" font-weight="bold">PRE</text>
                        <text x="400" y="150" text-anchor="middle" font-size="9" fill="#64748b">pre-tool-use.sh</text>
                        <text x="400" y="165" text-anchor="middle" font-size="8" fill="#94a3b8">Security checks</text>
                    </g>

                    <g class="hook-point">
                        <circle cx="550" cy="100" r="25" fill="#22c55e"/>
                        <text x="550" y="105" text-anchor="middle" fill="white" font-size="10" font-weight="bold">POST</text>
                        <text x="550" y="150" text-anchor="middle" font-size="9" fill="#64748b">post-tool-use.sh</text>
                        <text x="550" y="165" text-anchor="middle" font-size="8" fill="#94a3b8">Audit logging</text>
                    </g>

                    <g class="hook-point">
                        <circle cx="700" cy="100" r="25" fill="#8b5cf6"/>
                        <text x="700" y="105" text-anchor="middle" fill="white" font-size="10" font-weight="bold">STOP</text>
                        <text x="700" y="150" text-anchor="middle" font-size="9" fill="#64748b">stop.sh</text>
                        <text x="700" y="165" text-anchor="middle" font-size="8" fill="#94a3b8">Progress summary</text>
                    </g>

                    <!-- Timeline Labels -->
                    <text x="50" y="50" font-size="10" fill="#64748b">Session</text>
                    <text x="50" y="65" font-size="10" fill="#64748b">Lifecycle</text>
                </svg>
            </div>

            <div class="cards-grid">
                <div class="hook-card">
                    <div class="hook-icon session">S</div>
                    <h4>session-start.sh</h4>
                    <p>Runs when Claude Code starts. Detects project context and available agents/skills.</p>
                </div>
                <div class="hook-card">
                    <div class="hook-icon user">U</div>
                    <h4>user-prompt-submit.sh</h4>
                    <p>Logs all user prompts for analytics and debugging purposes.</p>
                </div>
                <div class="hook-card">
                    <div class="hook-icon pre">P</div>
                    <h4>pre-tool-use.sh</h4>
                    <p>Security gate that blocks dangerous operations (force push, secrets deletion).</p>
                </div>
                <div class="hook-card">
                    <div class="hook-icon post">A</div>
                    <h4>post-tool-use.sh</h4>
                    <p>Audit logging of all tool calls with timestamps and agent context.</p>
                </div>
                <div class="hook-card">
                    <div class="hook-icon stop">X</div>
                    <h4>stop.sh</h4>
                    <p>Creates session summary and cleans up when agent stops.</p>
                </div>
            </div>
        </div>

        <!-- MCP Tools Section -->
        <div class="subsection">
            <h3 class="subsection-title">
                <span class="subsection-icon">M</span>
                MCP Tools
            </h3>
            <p class="subsection-description">Model Context Protocol server providing external capabilities through code-executor</p>

            <div class="content-card highlight-card">
                <h4>Architecture: Single Gateway Pattern</h4>
                <p>Agents access <strong>one MCP server</strong>: <code>code-executor</code>. This server provides two pathways: <strong>execute_code</strong> for 71 tools across 9 servers, and <strong>dispatch_to_reviewboard</strong> for AI peer review.</p>

                <div class="dual-architecture">
                    <!-- Left side: MCP Tools -->
                    <div class="arch-branch">
                        <div class="branch-label">execute_code</div>
                        <div class="branch-description">TypeScript execution with MCP tools</div>
                        <div class="flow-item tools-box">
                            <span>filesystem</span>
                            <span>postgres</span>
                            <span>timescaledb</span>
                            <span>memory</span>
                            <span>arangodb</span>
                            <span>minio</span>
                            <span>n8n</span>
                            <span>playwright</span>
                            <span>ib</span>
                        </div>
                        <div class="tool-stat">9 servers / 71 tools</div>
                    </div>

                    <!-- Center: code-executor -->
                    <div class="arch-center">
                        <div class="flow-item agent-box">Agent</div>
                        <div class="flow-arrow-down">↓</div>
                        <div class="flow-item gateway-box">code-executor</div>
                        <div class="branch-arrows">
                            <span class="arrow-left">←</span>
                            <span class="arrow-right">→</span>
                        </div>
                    </div>

                    <!-- Right side: AI Review Board -->
                    <div class="arch-branch swarm-branch">
                        <div class="branch-label">dispatch_to_reviewboard</div>
                        <div class="branch-description">AI peer review for major decisions</div>
                        <div class="flow-item swarm-box">
                            <span class="swarm-node-mini gemini">Gemini</span>
                            <span class="swarm-node-mini codex">Codex</span>
                            <span class="swarm-node-mini claude">Claude</span>
                        </div>
                        <div class="tool-stat">3 AI models / parallel execution</div>
                    </div>
                </div>
            </div>

            <div class="mcp-grid">
                <div class="mcp-card primary-mcp">
                    <h4>code-executor <span class="badge-small">Primary</span></h4>
                    <p>The only MCP server agents call directly. Executes TypeScript with access to all underlying tools.</p>
                    <div class="mcp-tools">
                        <span class="tool-primary">execute_code</span>
                        <span class="tool-primary">dispatch_to_reviewboard</span>
                        <span class="tool-primary">swarm_health</span>
                        <span class="tool-primary">search_tools</span>
                        <span class="tool-primary">get_tool_info</span>
                        <span class="tool-primary">list_mcp_tools</span>
                    </div>
                </div>
            </div>

            <div class="content-card">
                <h4>Underlying Tool Servers (Accessed via code-executor)</h4>
                <p>These are <strong>not directly accessible</strong> to agents. The code-executor imports their tool wrappers at runtime:</p>
                <div class="underlying-tools-grid">
                    <div class="underlying-tool">
                        <strong>filesystem</strong>
                        <span class="tool-count">9 tools</span>
                        <small>read_file, write_file, list_directory, search_files, move_file, etc.</small>
                    </div>
                    <div class="underlying-tool">
                        <strong>postgres</strong>
                        <span class="tool-count">9 tools</span>
                        <small>execute_query, list_tables, describe_table, list_schemas, etc.</small>
                    </div>
                    <div class="underlying-tool">
                        <strong>timescaledb</strong>
                        <span class="tool-count">6 tools</span>
                        <small>execute_query, list_hypertables, list_tables, etc.</small>
                    </div>
                    <div class="underlying-tool">
                        <strong>memory</strong>
                        <span class="tool-count">9 tools</span>
                        <small>create_entities, create_relations, search_nodes, read_graph, etc.</small>
                    </div>
                    <div class="underlying-tool">
                        <strong>arangodb</strong>
                        <span class="tool-count">7 tools</span>
                        <small>arango_query, arango_insert, arango_update, arango_backup, etc.</small>
                    </div>
                    <div class="underlying-tool">
                        <strong>minio</strong>
                        <span class="tool-count">9 tools</span>
                        <small>upload_object, download_object, list_buckets, list_objects, etc.</small>
                    </div>
                    <div class="underlying-tool">
                        <strong>n8n</strong>
                        <span class="tool-count">6 tools</span>
                        <small>execute_workflow, get_workflows, activate_workflow, etc.</small>
                    </div>
                    <div class="underlying-tool">
                        <strong>playwright</strong>
                        <span class="tool-count">6 tools</span>
                        <small>navigate_to_page, click_element, fill_form, take_screenshot, etc.</small>
                    </div>
                    <div class="underlying-tool">
                        <strong>ib</strong>
                        <span class="tool-count">10 tools</span>
                        <small>get_historical_data, get_positions, search_contracts, etc.</small>
                    </div>
                </div>
            </div>

            <div class="content-card code-example">
                <h4>Usage Pattern</h4>
                <pre><code>// Agent calls code-executor to access underlying tools
mcp__code-executor__execute_code({
  code: `
    import { execute_query } from '/workspace/servers/postgres/execute_query.js';
    const result = await execute_query({ sql: 'SELECT * FROM users' });
    return result;
  `
})</code></pre>
            </div>

            <div class="content-card">
                <h4>Token Efficiency</h4>
                <p>The MCP code-executor implements lazy loading of tool definitions, achieving <strong>96% token savings</strong> (275 tokens vs 7,683 tokens at boot).</p>
                <div class="stat-bar">
                    <div class="stat-fill" style="width: 4%"></div>
                    <span class="stat-label">Lazy Loading: 275 tokens</span>
                </div>
                <div class="stat-bar full">
                    <div class="stat-fill-dim" style="width: 100%"></div>
                    <span class="stat-label">Full Loading: 7,683 tokens</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Level 5: Implementation Details -->
    <section id="level5" class="level level-5">
        <div class="level-header">
            <span class="level-number">5</span>
            <h2>Implementation Details</h2>
            <p class="level-description">Complete reference for all components</p>
        </div>

        <!-- Skills Reference -->
        <div class="reference-section">
            <h3>Complete Skills Reference</h3>
            <table class="reference-table">
                <thead>
                    <tr>
                        <th>Skill</th>
                        <th>Agent</th>
                        <th>Description</th>
                        <th>Trigger</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>architecture-diagram-creator</code></td>
                        <td><span class="agent-tag architect">Architect</span></td>
                        <td>Creates comprehensive HTML architecture diagrams</td>
                        <td>"create architecture diagram"</td>
                    </tr>
                    <tr>
                        <td><code>service-deployment</code></td>
                        <td><span class="agent-tag developer">Developer</span></td>
                        <td>Complete Docker deployment with OAuth2, Traefik</td>
                        <td>"deploy service", "install"</td>
                    </tr>
                    <tr>
                        <td><code>postgres-integration</code></td>
                        <td><span class="agent-tag developer">Developer</span></td>
                        <td>Database creation, user management, connections</td>
                        <td>"create database", "postgres"</td>
                    </tr>
                    <tr>
                        <td><code>keycloak-setup</code></td>
                        <td><span class="agent-tag developer">Developer</span></td>
                        <td>OAuth2/OIDC client configuration</td>
                        <td>"keycloak client", "SSO"</td>
                    </tr>
                    <tr>
                        <td><code>traefik-setup</code></td>
                        <td><span class="agent-tag developer">Developer</span></td>
                        <td>Routing, SSL/TLS, middleware configuration</td>
                        <td>"traefik routing", "SSL"</td>
                    </tr>
                    <tr>
                        <td><code>logging-observability</code></td>
                        <td><span class="agent-tag developer">Developer</span></td>
                        <td>Loki, Promtail, Grafana, monitoring</td>
                        <td>"logging", "monitoring"</td>
                    </tr>
                    <tr>
                        <td><code>troubleshooting</code></td>
                        <td><span class="agent-tag developer">Developer</span></td>
                        <td>Systematic debugging methodology</td>
                        <td>"debug", "troubleshoot"</td>
                    </tr>
                    <tr>
                        <td><code>naming-validator</code></td>
                        <td><span class="agent-tag developer">Developer</span></td>
                        <td>Resource naming standards validation</td>
                        <td>"install", "create", "deploy"</td>
                    </tr>
                    <tr>
                        <td><code>nginx-static-site</code></td>
                        <td><span class="agent-tag developer">Developer</span></td>
                        <td>Static website deployment</td>
                        <td>"deploy site", "static site"</td>
                    </tr>
                    <tr>
                        <td><code>secrets-security</code></td>
                        <td><span class="agent-tag security">Security</span></td>
                        <td>Secrets management, security hardening</td>
                        <td>"secrets", "security audit"</td>
                    </tr>
                    <tr>
                        <td><code>network-config</code></td>
                        <td><span class="agent-tag security">Security</span></td>
                        <td>Docker networks, port mappings, DNS</td>
                        <td>"network", "ports", "DNS"</td>
                    </tr>
                    <tr>
                        <td><code>ai-communication</code></td>
                        <td><span class="agent-tag general">General</span></td>
                        <td>AI-to-AI communication, swarm dispatch</td>
                        <td>"peer review", "aichat"</td>
                    </tr>
                    <tr>
                        <td><code>gitlab-integration</code></td>
                        <td><span class="agent-tag general">General</span></td>
                        <td>GitLab repository and CI/CD operations</td>
                        <td>"gitlab", "repository"</td>
                    </tr>
                    <tr>
                        <td><code>skill-creator</code></td>
                        <td><span class="agent-tag pm">PM</span></td>
                        <td>Guide for creating new skills</td>
                        <td>"create skill"</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Hooks Reference -->
        <div class="reference-section">
            <h3>Hooks Reference</h3>
            <table class="reference-table">
                <thead>
                    <tr>
                        <th>Hook</th>
                        <th>Location</th>
                        <th>Trigger</th>
                        <th>Purpose</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>session-start.sh</code></td>
                        <td><code>~/.claude/hooks/</code></td>
                        <td>Claude Code starts</td>
                        <td>Load project context, detect available agents</td>
                    </tr>
                    <tr>
                        <td><code>user-prompt-submit.sh</code></td>
                        <td><code>~/.claude/hooks/</code></td>
                        <td>User sends prompt</td>
                        <td>Log user prompts for analytics</td>
                    </tr>
                    <tr>
                        <td><code>pre-tool-use.sh</code></td>
                        <td><code>~/.claude/hooks/</code></td>
                        <td>Before any tool call</td>
                        <td>Block dangerous operations (force push, rm secrets)</td>
                    </tr>
                    <tr>
                        <td><code>post-tool-use.sh</code></td>
                        <td><code>~/.claude/hooks/</code></td>
                        <td>After any tool call</td>
                        <td>Audit logging to ~/.claude/audit/</td>
                    </tr>
                    <tr>
                        <td><code>stop.sh</code></td>
                        <td><code>~/.claude/hooks/</code></td>
                        <td>Agent stops</td>
                        <td>Create session summary, cleanup</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Developer Spec Template -->
        <div class="reference-section">
            <h3>Developer Specification Template</h3>
            <p>The template Developer uses to communicate with QA:</p>
            <div class="code-block">
                <pre><code># Developer Specification: {Feature/Service}

## Overview
{What was implemented}

## API Endpoints

### POST /api/v1/resource
**Description**: Create a new resource
**Request Body**:
```json
{
  "name": "string (required)",
  "description": "string (optional)"
}
```
**Response** (201):
```json
{
  "id": "int",
  "name": "string",
  "created_at": "ISO datetime"
}
```
**Errors**:
- 400: Invalid input
- 500: Database error

## Example Inputs/Outputs

### Happy Path
Input: {"name": "Test"}
Output: {"id": 1, "name": "Test", "status": "active"}

### Edge Cases
- Empty name: Should raise ValueError
- Max length (255 chars): Should accept</code></pre>
            </div>
        </div>

        <!-- AI Review Board Review Template -->
        <div class="reference-section">
            <h3>AI Review Board Review Synthesis Template</h3>
            <p>How PM synthesizes feedback from multiple AI reviewers:</p>
            <div class="code-block">
                <pre><code># Peer Review Synthesis: {Topic}

## Consensus (All Reviewers Agreed)
- {Point that all three models agreed on}
- {Another consensus point}

## Critical Issues (Must Address)
| Issue | Severity | Recommendation |
|-------|----------|----------------|
| {Issue description} | Critical | {How to fix} |

## Suggestions (Consider)
- Gemini: {Suggestion from Gemini}
- Codex: {Suggestion from Codex}
- Claude: {Suggestion from Claude}

## Conflicts (Need User Decision)
- {Topic where reviewers disagreed}
  - Gemini says: X
  - Codex says: Y

## Action Items
1. {Specific action to take}
2. {Another action}</code></pre>
            </div>
        </div>

        <!-- Audit Log Format -->
        <div class="reference-section">
            <h3>Audit Log Format</h3>
            <p>Tool calls are logged to <code>~/.claude/audit/YYYY-MM-DD.log</code></p>
            <div class="code-block">
                <pre><code>2026-01-17 16:45:32 | Agent: developer | Tool: Bash | Session: abc123
  Command: docker ps | grep analytics
2026-01-17 16:45:35 | Agent: developer | Tool: Write | Session: abc123
2026-01-17 16:45:40 | Agent: qa | Tool: Bash | Session: abc123
  Command: pytest tests/ -v</code></pre>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>Claude Code Agent Workflow Documentation</p>
            <p>Version 2.0 - January 2026</p>
            <p class="footer-links">
                <a href="https://linuxserver.lan">linuxserver.lan</a> |
                <a href="https://ai-servicers.com">ai-servicers.com</a>
            </p>
        </div>
    </footer>

    <script src="js/main.js"></script>
</body>
</html>
