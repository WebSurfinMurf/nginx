<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Code CLI - Context Management Architecture</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px 40px;
            background: #f8f9fa;
            border-bottom: 3px solid #3498db;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #3498db;
            display: block;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .content {
            padding: 40px;
        }

        h2 {
            color: #2c3e50;
            font-size: 2em;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        h3 {
            color: #34495e;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        h4 {
            color: #546e7a;
            font-size: 1.2em;
            margin: 20px 0 10px 0;
        }

        .section {
            margin-bottom: 40px;
        }

        .diagram-container {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            overflow-x: auto;
        }

        svg {
            max-width: 100%;
            height: auto;
        }

        .layer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .layer-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .layer-card h4 {
            color: white;
            margin-top: 0;
            font-size: 1.3em;
            border-bottom: 2px solid rgba(255,255,255,0.3);
            padding-bottom: 10px;
            margin-bottom: 15px;
        }

        .layer-card ul {
            list-style: none;
            padding-left: 0;
        }

        .layer-card li {
            padding: 8px 0 8px 25px;
            position: relative;
        }

        .layer-card li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #ffd700;
            font-weight: bold;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            margin: 15px 0;
        }

        .feature-list {
            list-style: none;
            padding: 0;
        }

        .feature-list li {
            padding: 12px 0 12px 30px;
            position: relative;
            border-bottom: 1px solid #ecf0f1;
        }

        .feature-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #27ae60;
            font-weight: bold;
            font-size: 1.2em;
        }

        .highlight-box {
            background: #e8f5e9;
            border-left: 4px solid #27ae60;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .component-box {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .component-box strong {
            color: #2c3e50;
            display: block;
            margin-bottom: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: #3498db;
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .flow-diagram {
            text-align: center;
            margin: 30px 0;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 40px;
        }

        .back-link {
            display: inline-block;
            margin-top: 10px;
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü§ñ Claude Code CLI</h1>
            <p class="subtitle">Multi-Layered Context Management Architecture</p>
            <p style="margin-top: 10px; font-size: 0.9em;">linuxserver.lan Infrastructure</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number">5</span>
                <span class="stat-label">Context Layers</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">13</span>
                <span class="stat-label">Infrastructure Skills</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">50+</span>
                <span class="stat-label">CLAUDE.md Files</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">4</span>
                <span class="stat-label">Specialized Agents</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">11</span>
                <span class="stat-label">Slash Commands</span>
            </div>
            <div class="stat-card">
                <span class="stat-number">64+</span>
                <span class="stat-label">MCP Tools</span>
            </div>
        </div>

        <div class="content">
            <section class="section">
                <h2>üìã Executive Summary</h2>
                <p>The Claude Code CLI implementation on linuxserver.lan employs a sophisticated multi-layered context management system designed to provide AI assistants with comprehensive, up-to-date knowledge of the infrastructure while maintaining session continuity and persistent memory across interactions.</p>

                <div class="highlight-box">
                    <h4>Key Design Philosophy</h4>
                    <p><strong>Bootstrap on Initialization</strong>: Every session starts by loading 9 core documentation files (~4,888 lines) containing infrastructure knowledge, security policies, network topology, and operational standards.</p>
                    <p><strong>Distributed Knowledge</strong>: Each of the 46 deployed services maintains its own CLAUDE.md file with deployment history, configuration, and lessons learned.</p>
                    <p><strong>Workflow Automation</strong>: 13 skills and 11 commands automate common tasks like deployment, debugging, and documentation.</p>
                    <p><strong>Persistent Memory</strong>: OpenMemory (mem0) provides cross-session AI memory using Gemini Flash LLM + Qdrant vector database.</p>
                </div>
            </section>

            <section class="section">
                <h2>üèóÔ∏è Architecture Overview - 5 Layers</h2>

                <div class="diagram-container">
                    <svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
                        <!-- Background -->
                        <defs>
                            <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea;stop-opacity:0.2" />
                                <stop offset="100%" style="stop-color:#764ba2;stop-opacity:0.2" />
                            </linearGradient>
                        </defs>
                        <rect width="1200" height="800" fill="url(#grad1)" rx="10"/>

                        <!-- Layer 1: Initialization -->
                        <rect x="50" y="50" width="1100" height="120" fill="#e8f5e9" stroke="#27ae60" stroke-width="3" rx="10"/>
                        <text x="600" y="85" text-anchor="middle" font-size="20" font-weight="bold" fill="#27ae60">Layer 1: Initialization (Bootstrap)</text>
                        <text x="600" y="110" text-anchor="middle" font-size="14" fill="#2c3e50">/cinit ‚Üí memoryfiles.md ‚Üí 9 Core AINotes Files (~4,888 lines)</text>
                        <text x="600" y="135" text-anchor="middle" font-size="12" fill="#546e7a">SYSTEM-OVERVIEW ‚Ä¢ skills ‚Ä¢ directives ‚Ä¢ agents ‚Ä¢ network ‚Ä¢ security ‚Ä¢ logging ‚Ä¢ integration ‚Ä¢ MCPtools</text>
                        <text x="600" y="155" text-anchor="middle" font-size="12" fill="#7f8c8d" font-style="italic">Mandatory load on every session start</text>

                        <!-- Layer 2: Project Documentation -->
                        <rect x="50" y="190" width="1100" height="100" fill="#e3f2fd" stroke="#2196f3" stroke-width="3" rx="10"/>
                        <text x="600" y="220" text-anchor="middle" font-size="20" font-weight="bold" fill="#1976d2">Layer 2: Project Documentation</text>
                        <text x="600" y="245" text-anchor="middle" font-size="14" fill="#2c3e50">50+ CLAUDE.md Files - Distributed Service-Specific Knowledge</text>
                        <text x="600" y="270" text-anchor="middle" font-size="12" fill="#546e7a">nginx/CLAUDE.md ‚Ä¢ dashy/CLAUDE.md ‚Ä¢ keycloak/CLAUDE.md ‚Ä¢ postgres/CLAUDE.md ‚Ä¢ ...</text>

                        <!-- Layer 3: Commands -->
                        <rect x="50" y="310" width="530" height="140" fill="#fff3e0" stroke="#ff9800" stroke-width="3" rx="10"/>
                        <text x="315" y="340" text-anchor="middle" font-size="18" font-weight="bold" fill="#e65100">Layer 3: Commands (11)</text>
                        <text x="315" y="365" text-anchor="middle" font-size="12" fill="#2c3e50">Session: /cinit ‚Ä¢ /csave ‚Ä¢ /cexit</text>
                        <text x="315" y="385" text-anchor="middle" font-size="12" fill="#2c3e50">Debug: /cdebug ‚Ä¢ /cundebug</text>
                        <text x="315" y="405" text-anchor="middle" font-size="12" fill="#2c3e50">Standards: /cdevstandard</text>
                        <text x="315" y="425" text-anchor="middle" font-size="12" fill="#2c3e50">Deploy: /cdeploy</text>

                        <!-- Layer 4: Skills -->
                        <rect x="620" y="310" width="530" height="140" fill="#f3e5f5" stroke="#9c27b0" stroke-width="3" rx="10"/>
                        <text x="885" y="340" text-anchor="middle" font-size="18" font-weight="bold" fill="#6a1b9a">Layer 4: Skills (13)</text>
                        <text x="885" y="365" text-anchor="middle" font-size="12" fill="#2c3e50">service-deployment ‚Ä¢ postgres-integration</text>
                        <text x="885" y="385" text-anchor="middle" font-size="12" fill="#2c3e50">keycloak-setup ‚Ä¢ traefik-setup</text>
                        <text x="885" y="405" text-anchor="middle" font-size="12" fill="#2c3e50">nginx-static-site ‚Ä¢ openmemory</text>
                        <text x="885" y="425" text-anchor="middle" font-size="12" fill="#2c3e50">troubleshooting ‚Ä¢ naming-validator</text>

                        <!-- Layer 5: Agents -->
                        <rect x="50" y="470" width="1100" height="120" fill="#fce4ec" stroke="#c2185b" stroke-width="3" rx="10"/>
                        <text x="600" y="505" text-anchor="middle" font-size="20" font-weight="bold" fill="#c2185b">Layer 5: Agents (4 Specialized Roles)</text>
                        <text x="600" y="530" text-anchor="middle" font-size="14" fill="#2c3e50">architect ‚Ä¢ developer ‚Ä¢ pm ‚Ä¢ security</text>
                        <text x="600" y="555" text-anchor="middle" font-size="12" fill="#546e7a">Dedicated context files in claude/agent-docs/ + Inter-agent communication protocol</text>
                        <text x="600" y="575" text-anchor="middle" font-size="12" fill="#7f8c8d" font-style="italic">File-based escalations for complex multi-step tasks</text>

                        <!-- Supporting Systems -->
                        <rect x="50" y="620" width="360" height="80" fill="#e0f2f1" stroke="#00897b" stroke-width="2" rx="10"/>
                        <text x="230" y="650" text-anchor="middle" font-size="16" font-weight="bold" fill="#00695c">Persistent Memory</text>
                        <text x="230" y="672" text-anchor="middle" font-size="11" fill="#2c3e50">OpenMemory (mem0 v1.0.0)</text>
                        <text x="230" y="688" text-anchor="middle" font-size="10" fill="#546e7a">Gemini Flash + Qdrant + PostgreSQL</text>

                        <rect x="430" y="620" width="360" height="80" fill="#e8eaf6" stroke="#3f51b5" stroke-width="2" rx="10"/>
                        <text x="610" y="650" text-anchor="middle" font-size="16" font-weight="bold" fill="#283593">MCP Integration</text>
                        <text x="610" y="672" text-anchor="middle" font-size="11" fill="#2c3e50">64+ Tools Across 8 Servers</text>
                        <text x="610" y="688" text-anchor="middle" font-size="10" fill="#546e7a">postgres ‚Ä¢ filesystem ‚Ä¢ fetch ‚Ä¢ n8n ‚Ä¢ ...</text>

                        <rect x="810" y="620" width="340" height="80" fill="#fff9c4" stroke="#f57f17" stroke-width="2" rx="10"/>
                        <text x="980" y="650" text-anchor="middle" font-size="16" font-weight="bold" fill="#f57f17">Session State</text>
                        <text x="980" y="672" text-anchor="middle" font-size="11" fill="#2c3e50">~/.claude/ Directory</text>
                        <text x="980" y="688" text-anchor="middle" font-size="10" fill="#546e7a">history ‚Ä¢ file-history ‚Ä¢ session-env</text>

                        <!-- Arrows showing flow -->
                        <path d="M 600 170 L 600 190" stroke="#27ae60" stroke-width="3" fill="none" marker-end="url(#arrowgreen)"/>
                        <path d="M 600 290 L 315 310" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrowblue)"/>
                        <path d="M 600 290 L 885 310" stroke="#2196f3" stroke-width="2" fill="none" marker-end="url(#arrowblue)"/>
                        <path d="M 315 450 L 600 470" stroke="#ff9800" stroke-width="2" fill="none" marker-end="url(#arroworange)"/>
                        <path d="M 885 450 L 600 470" stroke="#9c27b0" stroke-width="2" fill="none" marker-end="url(#arrowpurple)"/>
                        <path d="M 230 590 L 230 620" stroke="#00897b" stroke-width="2" fill="none" marker-end="url(#arrowteal)"/>
                        <path d="M 610 590 L 610 620" stroke="#3f51b5" stroke-width="2" fill="none" marker-end="url(#arrowindigo)"/>
                        <path d="M 980 590 L 980 620" stroke="#f57f17" stroke-width="2" fill="none" marker-end="url(#arrowyellow)"/>

                        <defs>
                            <marker id="arrowgreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#27ae60" />
                            </marker>
                            <marker id="arrowblue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#2196f3" />
                            </marker>
                            <marker id="arroworange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#ff9800" />
                            </marker>
                            <marker id="arrowpurple" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#9c27b0" />
                            </marker>
                            <marker id="arrowteal" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#00897b" />
                            </marker>
                            <marker id="arrowindigo" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#3f51b5" />
                            </marker>
                            <marker id="arrowyellow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
                                <path d="M0,0 L0,6 L9,3 z" fill="#f57f17" />
                            </marker>
                        </defs>

                        <!-- Title -->
                        <text x="600" y="30" text-anchor="middle" font-size="22" font-weight="bold" fill="#2c3e50">Claude Code CLI - Context Layers Architecture</text>
                        <text x="600" y="770" text-anchor="middle" font-size="12" fill="#7f8c8d">All layers work together to provide comprehensive AI context</text>
                    </svg>
                </div>
            </section>

            <section class="section">
                <h2>üìÅ Layer Details</h2>

                <div class="layer-grid">
                    <div class="layer-card">
                        <h4>1Ô∏è‚É£ Initialization Layer</h4>
                        <ul>
                            <li>Entry: /cinit command</li>
                            <li>Reads memoryfiles.md</li>
                            <li>Loads 9 core AINotes files</li>
                            <li>~4,888 lines total</li>
                            <li>Mandatory on session start</li>
                        </ul>
                    </div>

                    <div class="layer-card">
                        <h4>2Ô∏è‚É£ Project Documentation</h4>
                        <ul>
                            <li>50+ CLAUDE.md files</li>
                            <li>One per deployed service</li>
                            <li>Deployment history</li>
                            <li>Configuration notes</li>
                            <li>Lessons learned</li>
                        </ul>
                    </div>

                    <div class="layer-card">
                        <h4>3Ô∏è‚É£ Command Layer</h4>
                        <ul>
                            <li>11 slash commands</li>
                            <li>Session management</li>
                            <li>Debug workflows</li>
                            <li>Deployment checklists</li>
                            <li>Two-tier: concise + detailed</li>
                        </ul>
                    </div>

                    <div class="layer-card">
                        <h4>4Ô∏è‚É£ Skills Layer</h4>
                        <ul>
                            <li>13 specialized workflows</li>
                            <li>Auto-activate on phrases</li>
                            <li>Deployment automation</li>
                            <li>Security integration</li>
                            <li>Network configuration</li>
                        </ul>
                    </div>

                    <div class="layer-card">
                        <h4>5Ô∏è‚É£ Agent Layer</h4>
                        <ul>
                            <li>4 specialized agents</li>
                            <li>Role-based expertise</li>
                            <li>Dedicated context docs</li>
                            <li>Inter-agent protocol</li>
                            <li>Complex task handling</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>üîÑ Context Loading Flow</h2>
                <div class="code-block">
User starts Claude Code session
    ‚Üì
Execute /cinit command
    ‚Üì
Read memoryfiles.md (bootstrap file)
    ‚Üì
Load 9 core AINotes files in sequence:
  1. SYSTEM-OVERVIEW.md (infrastructure state)
  2. skills.md (10 infrastructure skills)
  3. directives.md (user coding standards - READ ONLY)
  4. agents.md (4-agent system)
  5. network.md (DNS, ports, Docker networks)
  6. security.md (Keycloak, OAuth2, secrets)
  7. logging.md (Loki, Grafana, observability)
  8. integration.md (service patterns)
  9. MCPtools.md (MCP server catalog)
    ‚Üì
Load lastsession.md (previous context)
    ‚Üì
Load project-specific CLAUDE.md (if working on project)
    ‚Üì
Skills auto-activate on trigger phrases
    ‚Üì
Agents available for specialized tasks
    ‚Üì
MCP tools provide infrastructure access
    ‚Üì
OpenMemory provides long-term memory
    ‚Üì
‚úÖ Full context available - ready to work
                </div>
            </section>

            <section class="section">
                <h2>üìö Core AINotes Files (Layer 1)</h2>
                <p>These 9 files are loaded on EVERY session initialization via memoryfiles.md:</p>

                <table>
                    <thead>
                        <tr>
                            <th>File</th>
                            <th>Purpose</th>
                            <th>Key Content</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>SYSTEM-OVERVIEW.md</strong></td>
                            <td>Infrastructure state</td>
                            <td>46 containers, 16 networks, service categories, quick commands</td>
                        </tr>
                        <tr>
                            <td><strong>skills.md</strong></td>
                            <td>Skills catalog</td>
                            <td>10 infrastructure skills documentation and usage</td>
                        </tr>
                        <tr>
                            <td><strong>directives.md</strong></td>
                            <td>Coding standards (READ ONLY)</td>
                            <td>User-defined standards, naming, environment variables, debugging</td>
                        </tr>
                        <tr>
                            <td><strong>agents.md</strong></td>
                            <td>Agent system</td>
                            <td>4 specialized agents, roles, communication protocol</td>
                        </tr>
                        <tr>
                            <td><strong>network.md</strong></td>
                            <td>Network topology</td>
                            <td>DNS, ports, Docker networks, firewall rules</td>
                        </tr>
                        <tr>
                            <td><strong>security.md</strong></td>
                            <td>Security policies</td>
                            <td>Keycloak SSO, OAuth2, certificates, secret locations</td>
                        </tr>
                        <tr>
                            <td><strong>logging.md</strong></td>
                            <td>Observability</td>
                            <td>Loki, Grafana, Promtail, Netdata, LogQL queries</td>
                        </tr>
                        <tr>
                            <td><strong>integration.md</strong></td>
                            <td>Service patterns</td>
                            <td>Deployment patterns, database integration, API design</td>
                        </tr>
                        <tr>
                            <td><strong>MCPtools.md</strong></td>
                            <td>MCP servers</td>
                            <td>64+ tools across 8 MCP servers, capabilities, usage</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box">
                    <h4>üéØ Purpose of Mandatory Loading</h4>
                    <p>By loading these 9 files on every session, Claude Code has immediate access to:</p>
                    <ul class="feature-list">
                        <li>Complete infrastructure topology and current state</li>
                        <li>All available tools and capabilities (skills, MCP)</li>
                        <li>User coding standards and preferences (READ ONLY)</li>
                        <li>Security policies and authentication patterns</li>
                        <li>Network architecture and routing rules</li>
                        <li>Observability stack for debugging</li>
                        <li>Service integration patterns</li>
                        <li>Agent specializations for complex tasks</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>üéØ Commands (Layer 3)</h2>
                <p><strong>Location</strong>: /home/administrator/.claude/commands/ ‚Üí /home/administrator/projects/claude/commands/</p>

                <h3>Two-Tier Command System</h3>
                <div class="component-grid">
                    <div class="component-box">
                        <strong>Concise Versions</strong>
                        Quick checklists for active use. Under 200 lines. Copy-paste ready commands.
                    </div>
                    <div class="component-box">
                        <strong>Detailed Versions</strong>
                        Comprehensive references. Full explanations, examples, troubleshooting, best practices.
                    </div>
                </div>

                <h3>11 Available Commands</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Command</th>
                            <th>Purpose</th>
                            <th>Usage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>/cinit</code></td>
                            <td>Initialize session</td>
                            <td>Loads all core context files (memoryfiles.md)</td>
                        </tr>
                        <tr>
                            <td><code>/csave</code></td>
                            <td>Save session state</td>
                            <td>Checkpoint current work and progress</td>
                        </tr>
                        <tr>
                            <td><code>/cexit</code></td>
                            <td>Exit session</td>
                            <td>Create summary and properly close session</td>
                        </tr>
                        <tr>
                            <td><code>/cdebug</code></td>
                            <td>Enable debugging</td>
                            <td>Systematic troubleshooting workflow (5 phases)</td>
                        </tr>
                        <tr>
                            <td><code>/cundebug</code></td>
                            <td>Rollback debug changes</td>
                            <td>Safe restoration of debug configurations</td>
                        </tr>
                        <tr>
                            <td><code>/cdevstandard</code></td>
                            <td>Development standards</td>
                            <td>Ensures consistency across deployments</td>
                        </tr>
                        <tr>
                            <td><code>/cdeploy</code></td>
                            <td>Deployment checklist</td>
                            <td>10-step workflow for new service deployment</td>
                        </tr>
                        <tr>
                            <td><code>/cauthinstall</code></td>
                            <td>Auth installation</td>
                            <td>Keycloak OAuth2 setup workflow</td>
                        </tr>
                        <tr>
                            <td><code>*-detail</code></td>
                            <td>Detailed reference</td>
                            <td>Comprehensive version of any command above</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <section class="section">
                <h2>‚ö° Skills (Layer 4)</h2>
                <p><strong>Location</strong>: /home/administrator/.claude/skills/ ‚Üí /home/administrator/projects/claude/skills/</p>

                <h3>13 Infrastructure Skills</h3>
                <div class="component-grid">
                    <div class="component-box">
                        <strong>service-deployment</strong>
                        Complete deployment workflow. Docker, networking, OAuth2, Traefik integration.
                    </div>
                    <div class="component-box">
                        <strong>postgres-integration</strong>
                        Database creation, user management, connection config, security best practices.
                    </div>
                    <div class="component-box">
                        <strong>keycloak-setup</strong>
                        OIDC client creation, group/role setup, secret management, troubleshooting.
                    </div>
                    <div class="component-box">
                        <strong>traefik-setup</strong>
                        HTTP/HTTPS routing, TCP routing, SSL/TLS certificates, middleware config.
                    </div>
                    <div class="component-box">
                        <strong>network-config</strong>
                        Docker network configuration, port mappings, DNS setup, security isolation.
                    </div>
                    <div class="component-box">
                        <strong>naming-validator</strong>
                        Validates resource names against naming standards (lowercase, hyphens, patterns).
                    </div>
                    <div class="component-box">
                        <strong>nginx-static-site</strong>
                        Deploy static websites under nginx.ai-servicers.com with path-based routing.
                    </div>
                    <div class="component-box">
                        <strong>openmemory</strong>
                        Persistent AI memory integration using mem0 v1.0.0 with Gemini Flash.
                    </div>
                    <div class="component-box">
                        <strong>logging-observability</strong>
                        Loki, Promtail, Grafana, Netdata configuration for comprehensive monitoring.
                    </div>
                    <div class="component-box">
                        <strong>secrets-security</strong>
                        Secrets management, security hardening, access control, vulnerability management.
                    </div>
                    <div class="component-box">
                        <strong>troubleshooting</strong>
                        Systematic debugging, service diagnostics, log analysis, problem resolution.
                    </div>
                    <div class="component-box">
                        <strong>skill-creator</strong>
                        Guide for creating effective skills that extend Claude's capabilities.
                    </div>
                </div>

                <div class="highlight-box">
                    <h4>üé¨ How Skills Work</h4>
                    <p>Skills are <strong>automatically activated</strong> when user messages contain trigger phrases defined in the skill description. For example:</p>
                    <ul class="feature-list">
                        <li>"deploy a site" ‚Üí Activates nginx-static-site skill</li>
                        <li>"set up keycloak client" ‚Üí Activates keycloak-setup skill</li>
                        <li>"create database" ‚Üí Activates postgres-integration skill</li>
                        <li>"add traefik routing" ‚Üí Activates traefik-setup skill</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>üë• Agents (Layer 5)</h2>
                <p><strong>Location</strong>: /home/administrator/.claude/agents/ ‚Üí /home/administrator/projects/claude/agents/</p>

                <h3>4 Specialized Agents</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Agent</th>
                            <th>Role</th>
                            <th>Expertise</th>
                            <th>Tools</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>architect</strong></td>
                            <td>System design specialist</td>
                            <td>Infrastructure design, technology decisions, service integration, performance optimization</td>
                            <td>Read, Write, Grep, Glob, Bash</td>
                        </tr>
                        <tr>
                            <td><strong>developer</strong></td>
                            <td>Implementation specialist</td>
                            <td>Coding, service deployment, debugging, database operations, container management</td>
                            <td>Read, Write, Edit, Grep, Glob, Bash</td>
                        </tr>
                        <tr>
                            <td><strong>pm</strong></td>
                            <td>Project orchestration</td>
                            <td>Multi-step coordination, progress tracking, result synthesis, requirement gathering</td>
                            <td>Read, Write, Grep, Glob, Bash</td>
                        </tr>
                        <tr>
                            <td><strong>security</strong></td>
                            <td>Security & network specialist</td>
                            <td>Network topology, firewall rules, SSL/TLS, Keycloak/OAuth2, Traefik, security audits</td>
                            <td>Read, Write, Grep, Glob, Bash</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Agent Context Files</h3>
                <p>Each agent has dedicated documentation in <code>claude/agent-docs/{agent}/</code>:</p>
                <ul class="feature-list">
                    <li>infrastructure-overview.md - Current state (61 containers, all services)</li>
                    <li>service-inventory.md - Complete service catalog with ports, networks</li>
                    <li>architecture-patterns.md - 7 standard deployment patterns</li>
                    <li>integration-standards.md - Database, API, service integration</li>
                    <li>technology-standards.md - Docker, Traefik, Keycloak configuration</li>
                    <li>QUICK-REFERENCE.md - Essential patterns for rapid decisions</li>
                </ul>

                <h3>Inter-Agent Communication</h3>
                <p>Agents use a <strong>file-based escalation protocol</strong> documented in <code>INTER-AGENT-PROTOCOL.md</code></p>
                <div class="code-block">
Escalation Path: $HOME/projects/data/claudeagents/{agent}/escalations/{target}/{project}/request-{topic}.md

Example: architect ‚Üí developer escalation
$HOME/projects/data/claudeagents/architect/escalations/developer/nginx/request-ssl-config.md
                </div>
            </section>

            <section class="section">
                <h2>üß† Persistent Memory System</h2>

                <h3>OpenMemory (mem0 v1.0.0)</h3>
                <div class="component-grid">
                    <div class="component-box">
                        <strong>LLM</strong>
                        Gemini Flash 2.5 via LiteLLM for cost-effective operation
                    </div>
                    <div class="component-box">
                        <strong>Embeddings</strong>
                        Gemini text-embedding-004 (768 dimensions)
                    </div>
                    <div class="component-box">
                        <strong>Vector Store</strong>
                        Qdrant for semantic search and similarity matching
                    </div>
                    <div class="component-box">
                        <strong>Database</strong>
                        PostgreSQL (openmemory_db) for metadata and records
                    </div>
                </div>

                <h3>What Gets Stored in Memory</h3>
                <ul class="feature-list">
                    <li>Architecture decisions and design rationale</li>
                    <li>Lessons learned from deployments</li>
                    <li>User preferences and working patterns</li>
                    <li>Problem-solution pairs for troubleshooting</li>
                    <li>Service configurations and best practices</li>
                    <li>Cross-session context and continuity</li>
                </ul>

                <div class="warning-box">
                    <h4>‚ö†Ô∏è What NOT to Store</h4>
                    <p>Secrets, passwords, API keys, or sensitive credentials are NEVER stored in memory. Only documentation of where they are located (e.g., "$HOME/projects/secrets/service.env").</p>
                </div>
            </section>

            <section class="section">
                <h2>üîå MCP Integration</h2>
                <p><strong>64+ Tools Across 8 MCP Servers</strong></p>

                <h3>MCP Servers</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Server</th>
                            <th>Tools</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>postgres-direct/proxy</strong></td>
                            <td>execute_sql, list_schemas, list_objects, explain_query, analyze</td>
                            <td>Database operations and health analysis</td>
                        </tr>
                        <tr>
                            <td><strong>timescaledb</strong></td>
                            <td>execute_query, list_tables, describe_table, get_stats</td>
                            <td>Time-series data queries</td>
                        </tr>
                        <tr>
                            <td><strong>filesystem</strong></td>
                            <td>read_file, write_file, list_directory, search_files, move_file</td>
                            <td>File system operations</td>
                        </tr>
                        <tr>
                            <td><strong>fetch-direct/proxy</strong></td>
                            <td>fetch (URL retrieval and processing)</td>
                            <td>Web content retrieval</td>
                        </tr>
                        <tr>
                            <td><strong>n8n</strong></td>
                            <td>get_workflows, execute_workflow, get_executions, activate_workflow</td>
                            <td>Workflow automation management</td>
                        </tr>
                        <tr>
                            <td><strong>minio</strong></td>
                            <td>list_buckets (object storage operations)</td>
                            <td>S3-compatible object storage</td>
                        </tr>
                        <tr>
                            <td><strong>playwright</strong></td>
                            <td>Browser automation and testing</td>
                            <td>Web UI automation</td>
                        </tr>
                    </tbody>
                </table>

                <div class="highlight-box">
                    <h4>üéØ MCP Purpose</h4>
                    <p>MCP servers provide Claude Code with <strong>direct infrastructure access</strong> for:</p>
                    <ul class="feature-list">
                        <li>Verifying database schemas and data</li>
                        <li>Reading configuration files</li>
                        <li>Executing queries for troubleshooting</li>
                        <li>Automating deployment workflows</li>
                        <li>Monitoring service health</li>
                        <li>Managing object storage</li>
                        <li>Testing web interfaces</li>
                    </ul>
                </div>
            </section>

            <section class="section">
                <h2>üìä Session State Management</h2>
                <p><strong>Location</strong>: /home/administrator/.claude/</p>

                <h3>Session Directory Structure</h3>
                <div class="component-grid">
                    <div class="component-box">
                        <strong>history.jsonl</strong>
                        Complete conversation history (266KB). All interactions logged.
                    </div>
                    <div class="component-box">
                        <strong>file-history/</strong>
                        All file modifications with versions. Full edit history preserved.
                    </div>
                    <div class="component-box">
                        <strong>session-env/</strong>
                        41 session environment snapshots. State checkpoints.
                    </div>
                    <div class="component-box">
                        <strong>todos/</strong>
                        Task tracking across sessions (20MB). Progress persistence.
                    </div>
                    <div class="component-box">
                        <strong>projects/</strong>
                        Per-project working state. Context isolation.
                    </div>
                    <div class="component-box">
                        <strong>settings.json</strong>
                        User preferences and configuration.
                    </div>
                </div>

                <h3>Symlink Architecture</h3>
                <p>Configuration is stored in Git-tracked repository, accessed via symlinks:</p>
                <div class="code-block">
~/.claude/commands  ‚Üí /home/administrator/projects/claude/commands/
~/.claude/skills    ‚Üí /home/administrator/projects/claude/skills/
~/.claude/agents    ‚Üí /home/administrator/projects/claude/agents/

Git Repository: https://github.com/WebSurfinMurf/claude
                </div>
            </section>

            <section class="section">
                <h2>‚úÖ Key Design Principles</h2>
                <ul class="feature-list">
                    <li><strong>Bootstrap on Initialization</strong>: Load all core knowledge immediately on session start</li>
                    <li><strong>Distributed Knowledge</strong>: Each service maintains its own documentation (CLAUDE.md)</li>
                    <li><strong>Version Control</strong>: All configuration tracked in Git for auditability</li>
                    <li><strong>Portable Paths</strong>: Always use $HOME variables, never hardcoded paths</li>
                    <li><strong>Security Isolation</strong>: Secrets isolated in dedicated directory, never in docs</li>
                    <li><strong>Documentation Persistence</strong>: Every successful deployment documented immediately</li>
                    <li><strong>Skill-Driven Automation</strong>: Common workflows automated and triggered by natural language</li>
                    <li><strong>Role Specialization</strong>: Complex tasks delegated to specialized agents</li>
                    <li><strong>Cross-Session Memory</strong>: Persistent learning via OpenMemory (mem0)</li>
                    <li><strong>Infrastructure Access</strong>: MCP tools enable verification and automation</li>
                </ul>
            </section>

            <section class="section">
                <h2>üéØ Benefits</h2>
                <div class="component-grid">
                    <div class="component-box">
                        <strong>Comprehensive Context</strong>
                        AI has complete infrastructure knowledge from initialization via 9 core files
                    </div>
                    <div class="component-box">
                        <strong>Session Continuity</strong>
                        Work resumes seamlessly across sessions with state preservation
                    </div>
                    <div class="component-box">
                        <strong>Persistent Learning</strong>
                        Lessons stored in mem0 and CLAUDE.md files for knowledge retention
                    </div>
                    <div class="component-box">
                        <strong>Workflow Automation</strong>
                        Skills and commands reduce repetitive tasks and ensure consistency
                    </div>
                    <div class="component-box">
                        <strong>Role Specialization</strong>
                        Agents handle complex multi-step tasks with dedicated expertise
                    </div>
                    <div class="component-box">
                        <strong>Infrastructure Access</strong>
                        MCP tools enable real-time verification and automation
                    </div>
                    <div class="component-box">
                        <strong>Auditability</strong>
                        All configuration version controlled in Git repository
                    </div>
                    <div class="component-box">
                        <strong>Security</strong>
                        Secrets isolated, never exposed in documentation or memory
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>üìà Statistics</h2>
                <div class="component-grid">
                    <div class="component-box">
                        <strong>Core Documentation</strong>
                        ~4,888 lines in 9 AINotes files loaded on every session
                    </div>
                    <div class="component-box">
                        <strong>Project Documentation</strong>
                        50+ CLAUDE.md files across deployed services
                    </div>
                    <div class="component-box">
                        <strong>Commands</strong>
                        11 slash commands (22 files: concise + detailed versions)
                    </div>
                    <div class="component-box">
                        <strong>Skills</strong>
                        13 specialized workflow skills for automation
                    </div>
                    <div class="component-box">
                        <strong>Agents</strong>
                        4 role-based agents with dedicated context files
                    </div>
                    <div class="component-box">
                        <strong>MCP Tools</strong>
                        64+ tools across 8 MCP servers
                    </div>
                    <div class="component-box">
                        <strong>Documented Projects</strong>
                        46 deployed services with complete documentation
                    </div>
                    <div class="component-box">
                        <strong>Session History</strong>
                        266KB conversation log with full file edit history
                    </div>
                </div>
            </section>

            <section class="section">
                <h2>üîó Key File Locations</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Component</th>
                            <th>Location</th>
                            <th>Purpose</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Core Documentation</td>
                            <td><code>$HOME/projects/AINotes/*.md</code></td>
                            <td>9 core files loaded on initialization</td>
                        </tr>
                        <tr>
                            <td>Project Docs</td>
                            <td><code>$HOME/projects/{service}/CLAUDE.md</code></td>
                            <td>Service-specific documentation</td>
                        </tr>
                        <tr>
                            <td>Commands</td>
                            <td><code>~/.claude/commands/</code></td>
                            <td>11 slash commands (symlink to Git)</td>
                        </tr>
                        <tr>
                            <td>Skills</td>
                            <td><code>~/.claude/skills/</code></td>
                            <td>13 specialized workflows (symlink to Git)</td>
                        </tr>
                        <tr>
                            <td>Agents</td>
                            <td><code>~/.claude/agents/</code></td>
                            <td>4 agent definitions (symlink to Git)</td>
                        </tr>
                        <tr>
                            <td>Agent Context</td>
                            <td><code>$HOME/projects/claude/agent-docs/</code></td>
                            <td>Dedicated docs per agent</td>
                        </tr>
                        <tr>
                            <td>Session State</td>
                            <td><code>~/.claude/</code></td>
                            <td>History, file-history, session-env, todos</td>
                        </tr>
                        <tr>
                            <td>Git Repository</td>
                            <td><code>$HOME/projects/claude/</code></td>
                            <td>Version-controlled configuration</td>
                        </tr>
                        <tr>
                            <td>Secrets</td>
                            <td><code>$HOME/projects/secrets/</code></td>
                            <td>Environment files with credentials (isolated)</td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </div>

        <footer>
            <p><strong>Claude Code CLI - Context Management Architecture</strong></p>
            <p>linuxserver.lan Infrastructure | Generated: November 2025</p>
            <a href="/" class="back-link">‚Üê Back to Nginx Portal</a>
        </footer>
    </div>
</body>
</html>
